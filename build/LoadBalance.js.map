{"version":3,"sources":["../src/LoadBalance.js"],"names":["RedisLoadBalance","settings","slaves","forEach","slaveSettings","connectSlave","slaveRedis","Redis","on","error","console","log","push","Math","floor","random","length","randSlaves"],"mappings":";;;;;;;;AAAA;;;;;;;;IAEMA,gB;AACF,8BAAYC,QAAZ,EAAqB;AAAA;;AAAA;;AACjB,aAAKC,MAAL,GAAc,EAAd;;AAEAD,iBAASE,OAAT,CAAiB,UAACC,aAAD,EAAmB;AAChC,kBAAKC,YAAL,CAAkBD,aAAlB;AACH,SAFD;AAGH;;;;qCAEYA,a,EAAc;AACvB,gBAAIE,aAAa,IAAIC,eAAJ,CAAUH,aAAV,CAAjB;;AAEAE,uBAAWE,EAAX,CAAc,SAAd,EAAyB,YAAM;AAC3B;AACA;AACH,aAHD;;AAKAF,uBAAWE,EAAX,CAAc,OAAd,EAAuB,UAACC,KAAD,EAAW;AAC9B;AACAC,wBAAQC,GAAR,kBAA2BF,KAA3B;AACH,aAHD;;AAKA,iBAAKP,MAAL,CAAYU,IAAZ,CAAiBN,UAAjB;AACH;;;qCAEW;AACR,mBAAOO,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAkB,KAAKb,MAAL,CAAYc,MAAZ,GAAmB,CAApB,GAAyB,CAAzB,GAA6B,CAA9C,CAAX,IAA+D,CAAtE;AACH;;;mCAES;AACN,mBAAO,KAAKd,MAAL,CAAY,KAAKe,UAAL,EAAZ,CAAP;AACH;;;;;;kBAGUjB,gB","file":"LoadBalance.js","sourcesContent":["import Redis from \"./Redis\";\r\n\r\nclass RedisLoadBalance {\r\n    constructor(settings){\r\n        this.slaves = [];\r\n\r\n        settings.forEach((slaveSettings) => {\r\n            this.connectSlave(slaveSettings);\r\n        });\r\n    }\r\n\r\n    connectSlave(slaveSettings){\r\n        let slaveRedis = new Redis(slaveSettings);\r\n\r\n        slaveRedis.on(\"connect\", () => {\r\n            //if(process.env.DEBUG)\r\n            //    console.log(\"[ Redis ] - Slave redis connected!\", slaveSettings);\r\n        });\r\n\r\n        slaveRedis.on(\"error\", (error) => {\r\n            // eslint-disable-next-line no-console\r\n            console.log(`[ Redis ] - ${error}`);\r\n        });\r\n\r\n        this.slaves.push(slaveRedis);\r\n    }\r\n\r\n    randSlaves(){\r\n        return Math.floor(Math.random() * ((this.slaves.length-1) - 0 + 1)) + 0;\r\n    }\r\n\r\n    getSlave(){\r\n        return this.slaves[this.randSlaves()];\r\n    }\r\n}\r\n\r\nexport default RedisLoadBalance;"]}