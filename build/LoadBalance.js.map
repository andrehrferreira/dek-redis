{"version":3,"sources":["../src/LoadBalance.js"],"names":["RedisLoadBalance","settings","slaves","forEach","slaveSettings","connectSlave","slaveRedis","Redis","on","process","env","DEBUG","console","log","error","push","Math","floor","random","length","randSlaves"],"mappings":";;;;;;;;AAAA;;;;;;;;IAEMA,gB;AACF,8BAAYC,QAAZ,EAAqB;AAAA;;AAAA;;AACjB,aAAKC,MAAL,GAAc,EAAd;;AAEAD,iBAASE,OAAT,CAAiB,UAACC,aAAD,EAAmB;AAChC,kBAAKC,YAAL,CAAkBD,aAAlB;AACH,SAFD;AAGH;;;;qCAEYA,a,EAAc;AACvB,gBAAIE,aAAa,IAAIC,eAAJ,CAAUH,aAAV,CAAjB;;AAEAE,uBAAWE,EAAX,CAAc,SAAd,EAAyB,YAAM;AAC3B,oBAAGC,QAAQC,GAAR,CAAYC,KAAf,EACIC,QAAQC,GAAR,CAAY,oCAAZ,EAAkDT,aAAlD;AACP,aAHD;;AAKAE,uBAAWE,EAAX,CAAc,OAAd,EAAuB,UAACM,KAAD,EAAW;AAC9B;AACAF,wBAAQC,GAAR,kBAA2BC,KAA3B;AACH,aAHD;;AAKA,iBAAKZ,MAAL,CAAYa,IAAZ,CAAiBT,UAAjB;AACH;;;qCAEW;AACR,mBAAOU,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAkB,KAAKhB,MAAL,CAAYiB,MAAZ,GAAmB,CAApB,GAAyB,CAAzB,GAA6B,CAA9C,CAAX,IAA+D,CAAtE;AACH;;;mCAES;AACN,mBAAO,KAAKjB,MAAL,CAAY,KAAKkB,UAAL,EAAZ,CAAP;AACH;;;;;;kBAGUpB,gB","file":"LoadBalance.js","sourcesContent":["import Redis from \"./Redis\";\n\nclass RedisLoadBalance {\n    constructor(settings){\n        this.slaves = [];\n\n        settings.forEach((slaveSettings) => {\n            this.connectSlave(slaveSettings);\n        });\n    }\n\n    connectSlave(slaveSettings){\n        let slaveRedis = new Redis(slaveSettings);\n\n        slaveRedis.on(\"connect\", () => {\n            if(process.env.DEBUG)\n                console.log(\"[ Redis ] - Slave redis connected!\", slaveSettings);\n        });\n\n        slaveRedis.on(\"error\", (error) => {\n            // eslint-disable-next-line no-console\n            console.log(`[ Redis ] - ${error}`);\n        });\n\n        this.slaves.push(slaveRedis);\n    }\n\n    randSlaves(){\n        return Math.floor(Math.random() * ((this.slaves.length-1) - 0 + 1)) + 0;\n    }\n\n    getSlave(){\n        return this.slaves[this.randSlaves()];\n    }\n}\n\nexport default RedisLoadBalance;"]}